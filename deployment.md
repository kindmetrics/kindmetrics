# Deployment
You can easily deploy this. Just clone this to your computer and run `docker build .` and deploy that container to your server. Kindmetrics use all lucky framework environment variables which can be seen here: https://luckyframework.org/guides/deploying/ubuntu#creating-a-systemd-unit-file-for-your-app

Kindmetrics is dependent on some SMTP mail server and postgresql. Be sure to have those prepared.

## Docker hub - download the prebuilt one
We have an docker container published at docker hub: https://hub.docker.com/repository/docker/kindmetrics/kindmetrics

You should be able to run `docker pull kindmetrics/kindmetrics:latest` to get the latest build there.

## Requirement
You would need this to run:
* docker
* postgres

Kindmetrics is running its instance on Kubernetes, you can find example how to set that up in `/script/kube`

## Environment variables

### LUCKY_ENV
Should be `production`

### APP_DOMAIN
this is the URL to the site the server is having.
example: `https://kindmetrics.io`

### APP_HOST
should only be the hostname, `app.kindmetrics.io` as an example.
This is used for redirects on wrong part. If used on localhost, write `localhost` here.

### APP_TRACK_HOST
the host for the track, if you use cdn or another static hosting for the track javascript. if you don't, just set this as the same as `APP_HOST` or like we have done, on our landing page. Like `kindmetrics.io`

### DATABASE_URL
The database URL to the db.
usually starts with `postgres://` for postgres.

### HOST
the host to the server, example `0.0.0.0`

### PORT
the port it shall listen to, should be `5000` usually

### SECRET_KEY_BASE
A generated secret key base to handle the secrets. Can be generated by lucky or others. NEED TO BE SET

### SMTP_HOST
DNS or IP to the SMTP server to send emails to

### SMTP_PASSWORD
password for smtp

### SMTP_USERNAME
username for smtp

### EMAIL_FROM
email where confirmation email and all that will be sent from, like `hakan@kindmetrics.io` - pick same domain you have right to send from through the smtp above.

### EMAIL_FROM_NAME
The name of the email for confirmation email, like `Håkan Nylén` or `Kindmetrics`
